#!/bin/bash

usage() {
    echo "Usage: build-configure [-t]"
    echo "  -t: Build test files"
}

option_given=0

while getopts ":t" opt; do
    option_given=1

    case $opt in
        t)
            cmake -S .. -B build -DCMAKE_TOOLCHAIN_FILE=build/build/conan_toolchain.cmake -DBUILD_TESTING=ON
            ;;
        \?)
            echo "Invalid option: -$opt" >&2
            usage
            ;;
    esac
done

if [ $option_given -eq 0 ]; then
    # create toolchain file for build
    cmake -S .. -B build -DCMAKE_TOOLCHAIN_FILE=build/build/conan_toolchain.cmake
fi